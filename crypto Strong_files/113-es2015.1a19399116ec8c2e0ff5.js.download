(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{qYmF:function(t,e,n){"use strict";n.r(e),n.d(e,"LoginModule",(function(){return V}));var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),a=n("LuMj"),s=n("grRr"),c=n("hGdz"),l=n("nXTA"),g=n("fXoL"),d=n("uJzi"),p=n("srJb"),b=n("Lm38"),m=n("5jFd");const f=function(t){return{"fa-method-active":t}};let u=(()=>{class t{constructor(t,e,n,o,i,r){this.fb=t,this.router=e,this.authService=n,this.customerService=o,this.blockUIService=i,this.notificationsService=r,this.formSubmitted=!1,this.faMethod="email",this.createForm()}ngOnInit(){this.blockUIService.startBlockUi(),this.customerService.getVerificationInfoByEmail(localStorage.getItem(l.a.EMAIL)).subscribe(t=>{this.blockUIService.stopBlockUi(),this.applicant=t},t=>{this.blockUIService.stopBlockUi()})}createForm(){this.verificationForm=this.fb.group({verificationType:["",[i.s.required]]})}get verificationType(){return this.verificationForm.get("verificationType")}getVerificationType(){return this.faMethod}selectMethod(){if(this.formSubmitted)return;this.formSubmitted=!0,this.blockUIService.startBlockUi();const t={baseUrl:window.document.location.origin,verificationType:this.faMethod,username:localStorage.getItem(l.a.EMAIL),twoFactorToken:localStorage.getItem(l.a.TOKEN_2FA)};this.authService.send2FACode(t).subscribe(t=>{localStorage.setItem(l.a.AUTH_2FA,JSON.stringify(t)),this.formSubmitted=!1,this.blockUIService.stopBlockUi(),this.router.navigate(["login/verify"])},t=>{this.formSubmitted=!1,this.blockUIService.stopBlockUi(),this.notificationsService.error("Server Error","Internal Server Error",{timeOut:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(g.Rb(i.c),g.Rb(r.f),g.Rb(d.d),g.Rb(d.f),g.Rb(p.a),g.Rb(b.b))},t.\u0275cmp=g.Lb({type:t,selectors:[["app-login-2fa-method"]],decls:32,vars:11,consts:[["header",""],[1,"cs-header","text-center","mb-30"],["body",""],[1,"color-gray-1200","text-22","mb-30"],[3,"formGroup"],[1,"text-15","color-gray-1200","mb-15","font-weight-bold"],[1,"fa-method-option",3,"ngClass"],[1,"flex","justify-center","items-center"],["id","email-radio-btn","formControlName","verificationType","value","email",3,"ngModel","ngModelChange"],[1,"flex-1","pl-15","pr-15"],[1,"text-18","text-black","cursor-pointer",3,"click"],["id","sms-radio-btn","formControlName","verificationType","value","sms",3,"ngModel","ngModelChange"],[1,"pt-15"],["id","next","type","button",1,"next-btn","green-background","white",3,"click"],["id","cancel","type","button",1,"next-btn","white-background","white",3,"click"]],template:function(t,e){1&t&&(g.Xb(0,"app-page-container"),g.Xb(1,"div",0),g.Xb(2,"h1",1),g.Qc(3," Please verify it is you "),g.Wb(),g.Wb(),g.Xb(4,"div",2),g.Xb(5,"div"),g.Xb(6,"div",3),g.Qc(7," This device isn\u2019t recognised. We need to verify it to make sure it is really you and keep your account secure. "),g.Wb(),g.Wb(),g.Xb(8,"div"),g.Xb(9,"form",4),g.Xb(10,"div",5),g.Qc(11,"Verification Methods"),g.Wb(),g.Xb(12,"div",6),g.Xb(13,"div",7),g.Xb(14,"div"),g.Xb(15,"p-radioButton",8),g.fc("ngModelChange",(function(t){return e.faMethod=t})),g.Wb(),g.Wb(),g.Xb(16,"div",9),g.Xb(17,"div",10),g.fc("click",(function(){return e.faMethod="email"})),g.Qc(18),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(19,"div",6),g.Xb(20,"div",7),g.Xb(21,"div"),g.Xb(22,"p-radioButton",11),g.fc("ngModelChange",(function(t){return e.faMethod=t})),g.Wb(),g.Wb(),g.Xb(23,"div",9),g.Xb(24,"div",10),g.fc("click",(function(){return e.faMethod="sms"})),g.Qc(25),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(26,"div",12),g.Xb(27,"button",13),g.fc("click",(function(){return e.selectMethod()})),g.Qc(28," Continue "),g.Wb(),g.Wb(),g.Xb(29,"div",12),g.Xb(30,"button",14),g.fc("click",(function(){return e.router.navigate(["/login"])})),g.Qc(31," Cancel "),g.Wb(),g.Wb(),g.Wb(),g.Wb()),2&t&&(g.Db(9),g.rc("formGroup",e.verificationForm),g.Db(3),g.rc("ngClass",g.vc(7,f,"email"==e.faMethod)),g.Db(3),g.rc("ngModel",e.faMethod),g.Db(3),g.Sc(" E-mail me at - ",(null==e.applicant?null:e.applicant.email)||"---"," "),g.Db(1),g.rc("ngClass",g.vc(9,f,"sms"==e.faMethod)),g.Db(3),g.rc("ngModel",e.faMethod),g.Db(3),g.Sc(" Message me at - ",(null==e.applicant?null:e.applicant.mobilePhoneNumber)||"---"," "))},directives:[m.a,i.u,i.l,i.e,o.m,a.a,i.k,i.d],styles:[".fa-method-option[_ngcontent-%COMP%]{box-shadow:0 3px 6px rgba(0,0,0,.1);border:2px solid #fff;padding:20px;margin-bottom:15px;border-radius:10px}.fa-method-active[_ngcontent-%COMP%]{box-shadow:none;border:2px solid #6cbe45}"]}),t})();var h=n("bB6Z"),v=n("yzas"),x=n("2SBO"),C=n("vbr4"),w=n("MmGs"),M=n("eWKd"),O=n("mZDU");function _(t,e){1&t&&(g.Xb(0,"div",25),g.Xb(1,"div",26),g.Sb(2,"em",27),g.Xb(3,"span",28),g.Qc(4,"You have entered an invalid combination. Please click "),g.Xb(5,"strong"),g.Qc(6,"Apply"),g.Wb(),g.Qc(7," to get started."),g.Wb(),g.Wb(),g.Wb())}function P(t,e){1&t&&(g.Xb(0,"span",32),g.Qc(1,"This is a required input field"),g.Wb())}function S(t,e){1&t&&(g.Xb(0,"span",33),g.Qc(1,"Invalid email address format"),g.Wb())}function y(t,e){if(1&t&&(g.Xb(0,"div",29),g.Oc(1,P,2,0,"span",30),g.Oc(2,S,2,0,"span",31),g.Wb()),2&t){const t=g.jc(2);g.Db(1),g.rc("ngIf",null==t.username.errors?null:t.username.errors.required),g.Db(1),g.rc("ngIf",(null==t.username.errors?null:t.username.errors.invalidEmail)||(null==t.username.errors?null:t.username.errors.pattern))}}function k(t,e){if(1&t){const t=g.Yb();g.Xb(0,"a",34),g.fc("click",(function(){return g.Gc(t),g.jc(2).showHidePassword()})),g.Qc(1),g.Wb()}if(2&t){const t=g.jc(2);g.Db(1),g.Rc(t.isPasswordShowed?"Hide":"Show")}}function W(t,e){1&t&&(g.Xb(0,"div",35),g.Qc(1," This is a required input field "),g.Wb())}function X(t,e){1&t&&(g.Xb(0,"div",36),g.Xb(1,"div",21),g.Xb(2,"div",37),g.Xb(3,"span",38),g.Qc(4," The email address or password you entered is incorrect, please review the information and try again. "),g.Wb(),g.Wb(),g.Wb(),g.Wb())}const I=function(t){return{"form-error":t}},E=function(t){return{"has-error":t}};function A(t,e){if(1&t){const t=g.Yb();g.Vb(0),g.Xb(1,"app-page-container"),g.Xb(2,"div",2),g.Xb(3,"h1",3),g.Qc(4," Transform your life with stronger credit "),g.Wb(),g.Wb(),g.Xb(5,"div",4),g.Xb(6,"div",5),g.Oc(7,_,8,0,"div",6),g.Xb(8,"form",7),g.fc("ngSubmit",(function(){g.Gc(t);const e=g.jc();return e.onSubmit(e.loginForm)})),g.Xb(9,"div",8),g.Xb(10,"div",9),g.Xb(11,"div"),g.Xb(12,"label",10),g.Qc(13,"Email Address"),g.Wb(),g.Xb(14,"input",11),g.fc("ngModelChange",(function(){return g.Gc(t),g.jc().hasError=!1})),g.Wb(),g.Oc(15,y,3,2,"div",12),g.Wb(),g.Wb(),g.Wb(),g.Xb(16,"div",8),g.Xb(17,"div",13),g.Xb(18,"div"),g.Xb(19,"label",14),g.Qc(20,"Password"),g.Wb(),g.Xb(21,"div",15),g.Xb(22,"input",16),g.fc("ngModelChange",(function(){return g.Gc(t),g.jc().hasError=!1})),g.Wb(),g.Oc(23,k,2,1,"a",17),g.Wb(),g.Oc(24,W,2,0,"div",18),g.Wb(),g.Wb(),g.Wb(),g.Oc(25,X,5,0,"div",19),g.Xb(26,"div",20),g.Xb(27,"div",21),g.Xb(28,"button",22),g.Qc(29,"Next "),g.Wb(),g.Wb(),g.Wb(),g.Xb(30,"div",23),g.Qc(31," I "),g.Xb(32,"a",24),g.Qc(33,"forgot"),g.Wb(),g.Qc(34," my password. "),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Ub()}if(2&t){const t=g.jc();g.Db(6),g.rc("ngClass",g.vc(11,I,t.loginError)),g.Db(1),g.rc("ngIf",!t.isEmailExist),g.Db(1),g.rc("formGroup",t.loginForm),g.Db(6),g.rc("ngClass",g.vc(13,E,t.hasError)),g.Db(1),g.rc("ngIf",t.isFieldInvalid("username")),g.Db(7),g.rc("ngClass",g.vc(15,E,t.hasError))("type",t.isPasswordShowed?"text":"password"),g.Db(1),g.rc("ngIf",!t.isPasswordBlank),g.Db(1),g.rc("ngIf",!t.loginForm.controls.password.valid&&t.loginForm.controls.password.touched),g.Db(1),g.rc("ngIf",t.loginError),g.Db(3),g.rc("disabled",!t.loginForm.valid||!t.isFormCompleted)}}function F(t,e){if(1&t){const t=g.Yb();g.Xb(0,"app-page-container"),g.Xb(1,"div",2),g.Xb(2,"h1",39),g.Qc(3," Verification Successful "),g.Wb(),g.Wb(),g.Xb(4,"div",40),g.Xb(5,"div",41),g.Sb(6,"img",42),g.Wb(),g.Xb(7,"div",43),g.Xb(8,"span",44),g.Qc(9," Your current device was successfully verified. "),g.Wb(),g.Wb(),g.Xb(10,"div",45),g.Xb(11,"button",46),g.fc("click",(function(){return g.Gc(t),g.jc().autoLogin()})),g.Qc(12,"Continue "),g.Wb(),g.Wb(),g.Wb(),g.Wb()}}let T=(()=>{class t{constructor(t,e,n,o,i,r,a,s){this.fb=t,this.authService=e,this.router=n,this.customerService=o,this.blockUIService=i,this.sharedData=r,this.rafService=a,this.applicationService=s,this.AGENT_EMAIL_ERROR_MESSAGE="The user did not include the CUSTOMER profile.",this.isEmailExist=!0,this.loginError=!1,this.isPasswordShowed=!0,this.hasError=!1,this.isVerified=!1,this.createForm(),-1!==this.router.url.indexOf("verify/success")&&(this.isVerified=!0)}ngOnInit(){this.isVerified||(l.a.cleanup(),this.rafService.setEligibleMember(!1),this.sharedData.showBackBtn=!1)}createForm(){this.loginForm=this.fb.group({username:["",[i.s.required,i.s.pattern(v.a.EMAIL_PATTERN_LOGIN)]],password:["",[i.s.required]]},{validator:this.validateEmailAddress.bind(this)})}get password(){return this.loginForm.get("password")}get username(){return this.loginForm.get("username")}get isPasswordBlank(){return null==this.password||null==this.password.value||0===this.password.value.length||!this.password.touched&&!this.password.dirty}showHidePassword(){this.isPasswordShowed=!this.isPasswordShowed}login(t,e){this.blockUIService.startBlockUi(),this.authService.login(t,e).subscribe(e=>{this.accessToken=e;const{profiles:n,user_uuid:o}=this.accessToken;n&&(n.includes("CUSTOMER")||n.includes("ADMIN"))?(localStorage.setItem(l.a.ACCESS_TOKEN,JSON.stringify(this.accessToken)),localStorage.setItem(l.a.CUSTOMER_UUID,o),localStorage.setItem(l.a.EMAIL,t),this.getLatestClient(t)):(this.loginError=!0,this.hasError=!0),this.blockUIService.stopBlockUi()},e=>{this.blockUIService.stopBlockUi(),"Two-factor"===(null==e?void 0:e.token_type)&&(null==e?void 0:e.access_token)?(localStorage.setItem(l.a.TOKEN_2FA,null==e?void 0:e.access_token),localStorage.setItem(l.a.EMAIL,t),this.router.navigate(["login/2fa"])):444==(null==e?void 0:e.status)||500==(null==e?void 0:e.statusCode)&&(null==e?void 0:e.message)===this.AGENT_EMAIL_ERROR_MESSAGE?this.isEmailExist=!1:(this.loginError=!0,this.hasError=!0)})}onSubmit(t){if(t.invalid)return;this.loginError=!1;const e=this.loginForm.value;this.login(e.username,e.password)}getMiddeskObjectIdByApplicationUuid(t,e){this.applicationService.getMiddeskEvaluationByApplicationUuid(t).subscribe(t=>{var n;t.data&&localStorage.setItem(l.a.MIDDESK_OBJECT_ID,(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.objectId)||""),e()})}autoLogin(){this.getLatestClient(localStorage.getItem(l.a.EMAIL))}redirectUser(t,e){e&&this.accessCustomerPortal(t)}getLatestClient(t){this.blockUIService.startBlockUi(),this.customerService.getLatestClient(t).subscribe(t=>{if(t){const e=Object.keys((null==t?void 0:t.clients)||{}).find(e=>!0===(null==t?void 0:t.clients[e]));this.redirectUser(e||(null==t?void 0:t.latestApplicationFlow),!!e)}this.blockUIService.stopBlockUi()},t=>{this.blockUIService.stopBlockUi()})}accessCustomerPortal(t){null==this.sharedData.storage&&(this.sharedData.storage=new Object),this.sharedData.storage.redirectHomeAfterLogin=!0,localStorage.setItem(l.a.SHOW_DEFAULT_TILE,"true");let e=h.a[t]+"home";t===x.c.RLOC&&(e=h.a.CONSUMER+"home"),this.router.navigate([e])}isFieldInvalid(t){const e=this.loginForm.get(t);return e.invalid&&e.touched}validateEmailAddress(t,e=!1){if(t&&(t.get("username").touched||e)){const t=v.a.EMAIL_PATTERN_LOGIN.test(this.username.value),e=v.a.isEmailValid(this.username.value);!this.username.value||this.username.value.replace(/\_/g,"").length<1?(this.isFormCompleted=!1,this.username.setErrors({required:!0})):e?t||this.username.setErrors({pattern:!0}):this.username.setErrors({invalidEmail:!0})}this.isFormCompleted=!0}}return t.\u0275fac=function(e){return new(e||t)(g.Rb(i.c),g.Rb(d.d),g.Rb(r.f),g.Rb(d.f),g.Rb(p.a),g.Rb(C.a),g.Rb(w.k),g.Rb(M.c))},t.\u0275cmp=g.Lb({type:t,selectors:[["app-login"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loginTemplate",""],["header",""],[1,"cs-header"],["body",""],[1,"login-form",3,"ngClass"],["class","mt-20",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xs-12","form-group","mt-20","mb-20"],["for","username",1,"cs-form-label"],["textTrim","","id","username","formControlName","username","data-testing","username","type","text","pInputText","",1,"form-control","gray-text",3,"ngClass","ngModelChange"],["class","validation-message red",4,"ngIf"],[1,"col-xs-12","form-group","mb-20"],["for","password",1,"cs-form-label"],[1,"flex","items-baseline","pwd-toggle-field"],["id","password","formControlName","password","data-testing","password","pInputText","",1,"form-control","gray-text",3,"ngClass","type","ngModelChange"],["id","show-hide-password","class","text-15 show-hide-password",3,"click",4,"ngIf"],["id","password-error","class","error-message",4,"ngIf"],["class","row mb-20",4,"ngIf"],[1,"row","mt-10","mb-20"],[1,"col-xs-12"],["id","next","type","submit",1,"next-btn","green-background","white",3,"disabled"],[1,"forgot-pw","text-center","text-black-4","text-15"],["id","acb-link","routerLink","/password/reset",1,"acb-link"],[1,"mt-20"],[1,"flex","warn-message-div"],[1,"fas","fa-info-circle","color-yellow-700","text-24","mr-10"],[1,"text-17","text-black-3"],[1,"validation-message","red"],["id","require-email-error",4,"ngIf"],["id","invalid-email-error",4,"ngIf"],["id","require-email-error"],["id","invalid-email-error"],["id","show-hide-password",1,"text-15","show-hide-password",3,"click"],["id","password-error",1,"error-message"],[1,"row","mb-20"],[1,"bg-pink-100","p-15","border-radius-10"],[1,"color-red-700","text-17"],[1,"cs-header","text-center"],["body","",1,"flex","flex-column","items-center"],[1,"text-center","mt-40","mb-35"],["alt","","src","../../../../assets/icon-success.svg","width","100"],[1,"text-center","margin"],[1,"text-22","text-black-4"],[1,"mt-30","w-full"],["id","next","type","button",1,"next-btn","green-background","white",3,"click"]],template:function(t,e){if(1&t&&(g.Oc(0,A,35,17,"ng-container",0),g.Oc(1,F,13,0,"ng-template",null,1,g.Pc)),2&t){const t=g.Dc(2);g.rc("ngIf",!e.isVerified)("ngIfElse",t)}},directives:[o.o,m.a,o.m,i.u,i.l,i.e,i.a,O.a,i.k,i.d,r.h],styles:["h2[_ngcontent-%COMP%]{font-weight:400;font-size:24px;color:#707070}.login-form-wrapper[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.login-form-wrapper[_ngcontent-%COMP%]{width:95%;max-width:552px;display:block;padding:40px 20px 30px;margin:20px auto 120px;text-align:center;border-radius:5px;box-shadow:0 3px 6px rgba(0,0,0,.1);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.login-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#707070;font-size:24px;font-weight:500;margin:0 auto;max-width:360px}.login-form-wrapper[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{padding:0 50px;line-height:16px;margin:50px auto 0;color:#707070;font-size:14px;font-weight:400;max-width:360px}.login-form-wrapper[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:block;max-width:360px;margin:0 auto}.login-form-wrapper[_ngcontent-%COMP%]   .login-form.form-error[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-form-wrapper[_ngcontent-%COMP%]   .login-form.form-error[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{border-color:#db6c6c!important}.login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:30px 0 0}.login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding:0 15px;color:#707070;width:100%;border:1px solid #ccc;height:40px;line-height:40px;border-radius:5px;box-shadow:none}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message.error-message[_ngcontent-%COMP%]{color:#db6c6c;text-align:center;font-size:14px;font-weight:400;line-height:18px;padding-top:25px;padding-bottom:25px}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message.error-message[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-top:-14px;margin-bottom:-13px;display:block}.login-form-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .mainButton[_ngcontent-%COMP%]{height:40px;line-height:38px;padding:0;width:100%;max-width:168px;font-size:14px;font-weight:500;color:#fff}.login-form-wrapper[_ngcontent-%COMP%]   .forgot-pw[_ngcontent-%COMP%]{margin-top:15px;font-size:12px;color:#707070;font-weight:400;-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}.login-form-wrapper[_ngcontent-%COMP%]   .forgot-pw[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1e8dd6}.login-form[_ngcontent-%COMP%]   .warn-message-div[_ngcontent-%COMP%]{border:2px solid #eab44e;border-radius:10px;padding:20px;margin:0 auto}@media only screen and (max-width:639px){.login-form-wrapper[_ngcontent-%COMP%]{padding:20px}.login-form-wrapper[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{margin-top:16px}.login-form-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]{margin-top:0}.login-form-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .mainButton[_ngcontent-%COMP%]{max-width:188px}.login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:40px 0 0}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message.error-message[_ngcontent-%COMP%]{padding-top:13px;padding-bottom:13px}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;margin:0;text-align:center}}@media only screen and (max-width:479px){.login-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:400;margin:0 auto;width:90%}.login-form-wrapper[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{max-width:250px;padding:0}.login-form-wrapper[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%], .login-form-wrapper[_ngcontent-%COMP%]   .warn-message-div[_ngcontent-%COMP%]{width:90%}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:-15%}}@media only screen and (max-width:359px){.login-form-wrapper[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%], .login-form-wrapper[_ngcontent-%COMP%]   .warn-message-div[_ngcontent-%COMP%]{max-width:100%}}"]}),t})();function U(t,e){1&t&&(g.Xb(0,"div",18),g.Qc(1," This is a required input field "),g.Wb())}function R(t,e){1&t&&(g.Xb(0,"div",19),g.Xb(1,"span"),g.Qc(2," Verification code does not match. "),g.Wb(),g.Wb())}const D=function(t){return{"form-error":t}},Q=function(t){return{"has-error":t}};let L=(()=>{class t{constructor(t,e,n,o,i){this.fb=t,this.authService=e,this.router=n,this.notificationService=o,this.blockUIService=i,this.badVerificationCode=!1,this.formSubmitted=!1,this.createForm(),this.blockUIService.stopBlockUi(),this.loadingResendCode=!1}ngOnInit(){this.auth2FA=JSON.parse(localStorage.getItem(l.a.AUTH_2FA))}createForm(){this.verificationForm=this.fb.group({verificationCode:["",[i.s.required]]})}get verificationCode(){return this.verificationForm.get("verificationCode")}isFieldInvalid(t){const e=this.verificationForm.get(t);return e.invalid&&(e.dirty||e.touched)}maskValue(t){if(null!=t)return t.indexOf("@")>0?t.charAt(0)+"***"+t.substring(t.indexOf("@"),t.length):t.charAt(0)+"***"+t.substring(t.lastIndexOf("-"),t.length)}resetCode(){this.loadingResendCode=!0,this.authService.reset2FACode(this.auth2FA).subscribe(t=>{const{verificationType:e}=this.auth2FA||{},n="sms"===e?"phone number":"email";setTimeout(()=>{this.loadingResendCode=!1,this.notificationService.success("Success",`Verification code successfully sent via ${n}.`)},2e3)},t=>{this.loadingResendCode=!1,this.notificationService.error("Server Error","Internal Server Error",{timeOut:3e3})})}onSubmit(){var t,e,n;if(this.formSubmitted=!0,this.verificationForm.invalid)return;const o={twoFactorToken:null===(t=this.auth2FA)||void 0===t?void 0:t.twoFactorToken,username:null===(e=this.auth2FA)||void 0===e?void 0:e.username,verificationType:null===(n=this.auth2FA)||void 0===n?void 0:n.verificationType,verificationCode:this.verificationCode.value};this.authService.verify2FACode(o).subscribe(t=>{(null==t?void 0:t.profiles)&&((null==t?void 0:t.profiles.includes("CUSTOMER"))||(null==t?void 0:t.profiles.includes("ADMIN")))&&(localStorage.setItem(l.a.ACCESS_TOKEN,JSON.stringify(t)),localStorage.setItem(l.a.KED,null==t?void 0:t.ked),localStorage.setItem(l.a.CUSTOMER_UUID,null==t?void 0:t.user_uuid),localStorage.setItem(l.a.EMAIL,null==t?void 0:t.username)),this.router.navigate(["login/verify/success"])},t=>{this.badVerificationCode=!0})}}return t.\u0275fac=function(e){return new(e||t)(g.Rb(i.c),g.Rb(d.d),g.Rb(r.f),g.Rb(b.b),g.Rb(p.a))},t.\u0275cmp=g.Lb({type:t,selectors:[["app-login-verify"]],decls:28,vars:11,consts:[["header",""],[1,"cs-header","text-center","mb-30"],[1,"text-22","text-black-4","mb-30"],[1,"text-green","font-600"],["body",""],[1,"login-form",3,"ngClass"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xs-12","form-group","mt-20","mb-20"],["for","verificationCode",1,"cs-form-label"],["id","verificationCode","type","text","formControlName","verificationCode","pInputText","",1,"form-control","gray-text",3,"ngClass","ngModelChange"],["id","error-message","class","error-message",4,"ngIf"],["class","cs-error-box mb-20",4,"ngIf"],[1,"row","mt-10","mb-20"],[1,"col-xs-12"],["id","next","type","submit",1,"next-btn","green-background","white",3,"disabled"],[1,"text-center","text-black-4","text-15"],["id","resend-code",1,"acb-link",3,"click"],["id","error-message",1,"error-message"],[1,"cs-error-box","mb-20"]],template:function(t,e){1&t&&(g.Xb(0,"app-page-container"),g.Xb(1,"div",0),g.Xb(2,"h1",1),g.Qc(3," Please verify it is you "),g.Wb(),g.Xb(4,"p",2),g.Qc(5," A verification code has been sent to "),g.Xb(6,"span",3),g.Qc(7),g.Wb(),g.Wb(),g.Wb(),g.Xb(8,"div",4),g.Xb(9,"div",5),g.Xb(10,"form",6),g.fc("ngSubmit",(function(){return e.onSubmit()})),g.Xb(11,"div",7),g.Xb(12,"div",8),g.Xb(13,"div"),g.Xb(14,"label",9),g.Qc(15,"Verification Code"),g.Wb(),g.Xb(16,"input",10),g.fc("ngModelChange",(function(){return e.badVerificationCode=!1})),g.Wb(),g.Oc(17,U,2,0,"div",11),g.Wb(),g.Wb(),g.Wb(),g.Oc(18,R,3,0,"div",12),g.Xb(19,"div",13),g.Xb(20,"div",14),g.Xb(21,"button",15),g.Qc(22,"Verify "),g.Wb(),g.Wb(),g.Wb(),g.Xb(23,"div",16),g.Qc(24," Didn\u2019t get the code? "),g.Xb(25,"a",17),g.fc("click",(function(){return e.resetCode()})),g.Qc(26,"Resend code"),g.Wb(),g.Qc(27,". "),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()),2&t&&(g.Db(7),g.Rc(e.maskValue(null==e.auth2FA?null:e.auth2FA.verificationMethod)),g.Db(2),g.rc("ngClass",g.vc(7,D,e.badVerificationCode)),g.Db(1),g.rc("formGroup",e.verificationForm),g.Db(6),g.rc("ngClass",g.vc(9,Q,e.badVerificationCode)),g.Db(1),g.rc("ngIf",!e.verificationForm.controls.verificationCode.valid&&e.verificationForm.controls.verificationCode.touched),g.Db(1),g.rc("ngIf",e.formSubmitted&&e.badVerificationCode),g.Db(3),g.rc("disabled",!e.verificationForm.valid))},directives:[m.a,o.m,i.u,i.l,i.e,i.a,i.k,i.d,o.o],styles:["h2[_ngcontent-%COMP%]{font-weight:400;font-size:24px;color:#707070}.login-form-wrapper[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.login-form-wrapper[_ngcontent-%COMP%]{width:95%;max-width:552px;display:block;padding:40px 20px 30px;margin:20px auto 120px;text-align:center;border-radius:5px;box-shadow:0 3px 6px rgba(0,0,0,.1);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.login-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#707070;font-size:24px;font-weight:500;margin:0 auto;max-width:360px}.login-form-wrapper[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{padding:0 50px;line-height:16px;margin:50px auto 0;color:#707070;font-size:14px;font-weight:400;max-width:360px}.login-form-wrapper[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:block;max-width:360px;margin:0 auto}.login-form-wrapper[_ngcontent-%COMP%]   .login-form.form-error[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-form-wrapper[_ngcontent-%COMP%]   .login-form.form-error[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{border-color:#db6c6c!important}.login-form-wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:14px;color:#db6c6c;font-weight:400;line-height:19px;text-align:center}.login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:30px 0 0}.login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding:0 15px;color:#707070;width:100%;border:1px solid #ccc;height:40px;line-height:40px;border-radius:5px;box-shadow:none}.login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:10px;color:#db6c6c;font-weight:400;text-align:right;line-height:11px;padding-top:2px;margin-bottom:-13px}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message[_ngcontent-%COMP%]{font-size:12px;color:#db6c6c;line-height:14px;padding-top:25px;padding-bottom:25px}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-top:-14px;margin-bottom:-13px;display:block}.login-form-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .mainButton[_ngcontent-%COMP%]{height:40px;line-height:38px;padding:0;width:100%;font-size:14px;font-weight:500;color:#fff}.login-form-wrapper[_ngcontent-%COMP%]   .forgot-pw[_ngcontent-%COMP%]{margin-top:5px;font-size:12px;color:#707070;font-weight:400;-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}.login-form-wrapper[_ngcontent-%COMP%]   .forgot-pw[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1e8dd6}@media only screen and (max-width:639px){.login-form-wrapper[_ngcontent-%COMP%]{padding:20px}.login-form-wrapper[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{margin-top:16px}.login-form-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]{margin-top:0}.login-form-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .mainButton[_ngcontent-%COMP%]{max-width:188px}.login-form-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:40px 0 0}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message[_ngcontent-%COMP%]{padding-top:13px;padding-bottom:13px}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;margin:0}}@media only screen and (max-width:479px){.login-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:400;margin:0 auto;width:90%}.login-form-wrapper[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{max-width:250px;padding:0}.login-form-wrapper[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:90%}.login-form-wrapper[_ngcontent-%COMP%]   .last-error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:130%;margin-left:-15%}}@media only screen and (max-width:359px){.login-form-wrapper[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{max-width:100%}}"]}),t})(),B=(()=>{class t{constructor(t){this.authService=t}loginPage(){this.authService.logout()}}return t.\u0275fac=function(e){return new(e||t)(g.Rb(d.d))},t.\u0275cmp=g.Lb({type:t,selectors:[["app-login-expired"]],decls:13,vars:0,consts:[["header",""],[1,"cs-header","text-center"],["body",""],[1,"text-center","mt-40","mb-35"],["src","../../../../assets/icon-expired.svg","width","100","alt",""],[1,"text-center","margin"],[1,"text-22","text-black-4"],[1,"mt-30"],["id","next","type","button",1,"next-btn","green-background","white",3,"click"]],template:function(t,e){1&t&&(g.Xb(0,"app-page-container"),g.Xb(1,"div",0),g.Xb(2,"h1",1),g.Qc(3," Your login time expired "),g.Wb(),g.Wb(),g.Xb(4,"div",2),g.Xb(5,"div",3),g.Sb(6,"img",4),g.Wb(),g.Xb(7,"div",5),g.Xb(8,"span",6),g.Qc(9," Log back in to access your account. "),g.Wb(),g.Wb(),g.Xb(10,"div",7),g.Xb(11,"button",8),g.fc("click",(function(){return e.loginPage()})),g.Qc(12,"Login "),g.Wb(),g.Wb(),g.Wb(),g.Wb())},directives:[m.a],styles:[".maintenance[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin-bottom:72px}.maintenance[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:30px 0}.maintenance[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:19px;padding-top:2px}.maintenance[_ngcontent-%COMP%]   p.narrow[_ngcontent-%COMP%]{max-width:280px;margin:0 auto}.maintenance[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f9f9f9;color:#707070;font-size:14px;font-weight:500;border-radius:5px;font-family:Roboto,sans-serif;margin-top:20px}.maintenance[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#707070}"]}),t})();var z=n("9sNl");const N=[{path:"",component:T,canActivate:[z.a]},{path:"expired",component:B,canActivate:[z.a]},{path:"verify",component:L,canActivate:[z.a]},{path:"verify/success",component:T,canActivate:[z.a]},{path:"2fa",component:u,canActivate:[z.a]}];let V=(()=>{class t{}return t.\u0275mod=g.Pb({type:t}),t.\u0275inj=g.Ob({factory:function(e){return new(e||t)},imports:[[o.c,i.f,i.q,r.i,a.b,s.a,c.a,r.i.forChild(N)]]}),t})()}}]);