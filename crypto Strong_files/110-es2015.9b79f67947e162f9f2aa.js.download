(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{c8ai:function(e,t,i){"use strict";i.r(t),i.d(t,"HomeConsumerModule",(function(){return Le}));var s=i("tyNb"),o=i("9sNl"),a=i("mImb"),n=i("uEoq"),c=i("nXTA"),r=i("1Uaf"),l=i("SK/u"),h=i("k179"),d=i("9TPT"),u=i("r2BX"),m=i("Lm38"),b=i("cp0P"),p=i("cG8B"),g=i("2SBO"),f=i("HMub"),v=i("9dYO"),S=i("bB6Z"),w=i("6EVO"),y=i("btgd"),A=i("Sk80"),I=i("IRCI"),E=i("fXoL"),D=i("uJzi"),C=i("MmGs"),R=i("dhzo"),O=i("srJb"),P=i("vbr4"),L=i("8SrD"),T=i("Coov"),M=i("ofXK"),k=i("oOAL"),U=i("M8ep"),F=i("wULr"),N=i("mXsX"),W=i("SkKT"),_=i("Ji9t"),X=i("RmyQ"),B=i("vJ5O"),G=i("/Zr5"),V=i("SBLJ"),j=i("GV+C"),x=i("Sv6t"),Y=i("hoW0"),H=i("PpcQ"),Q=i("+qEO"),J=i("tIoU"),z=i("yl9d"),K=i("Q0GS"),$=i("WusO"),q=i("zgVs"),Z=i("cBKa"),ee=i("abtP");const te=["addPaymentMethod"],ie=["pastDueOrFeeAlert"],se=["autoPayDisabled"],oe=["missedPay"];function ae(e,t){if(1&e&&(E.Xb(0,"div"),E.Sb(1,"app-toggle-switch-product",35),E.Wb()),2&e){const e=E.jc();E.Db(1),E.rc("product",e.toggleProduct)}}function ne(e,t){1&e&&E.Sb(0,"rloc-greetings-tile",36)}function ce(e,t){if(1&e&&(E.Xb(0,"div",37),E.Xb(1,"div",38),E.Qc(2," Welcome Back! "),E.Wb(),E.Xb(3,"div",39),E.Qc(4),E.Wb(),E.Wb()),2&e){const e=E.jc();E.Db(4),E.Sc(" ",e.greetingContent," ")}}function re(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",10),E.Xb(1,"app-raf-default-tile",40),E.fc("optOutEmitter",(function(){return E.Gc(e),E.jc().showReferralOptOutModal=!0})),E.Wb(),E.Wb()}}function le(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",10),E.Xb(1,"app-raf-share-widget",41),E.fc("loaded",(function(t){return E.Gc(e),E.jc().onReferAFriendIframeLoaded(t)})),E.Wb(),E.Wb()}}function he(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",10),E.Xb(1,"app-interest-selection",42),E.fc("onUpdateInterestSelection",(function(t){return E.Gc(e),E.jc().onUpdateInterestSelection(t)})),E.Wb(),E.Wb()}if(2&e){const e=E.jc();E.Db(1),E.rc("interests",e.interests)("isInterestSubmitted",e.isInterestSubmitted)}}function de(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",43),E.Xb(1,"app-raf-default-tile",40),E.fc("optOutEmitter",(function(){return E.Gc(e),E.jc().showReferralOptOutModal=!0})),E.Wb(),E.Wb()}}function ue(e,t){1&e&&E.Sb(0,"rloc-greetings-tile")}function me(e,t){if(1&e&&(E.Xb(0,"div",44),E.Xb(1,"div",38),E.Qc(2," Welcome Back! "),E.Wb(),E.Xb(3,"div",45),E.Qc(4),E.Wb(),E.Wb()),2&e){const e=E.jc();E.Db(4),E.Sc(" ",e.greetingContent," ")}}function be(e,t){if(1&e){const e=E.Yb();E.Xb(0,"app-progress-tracking",46),E.fc("setScoreEmitter",(function(t){return E.Gc(e),E.jc().onSetCreditScoreGoal(t)})),E.Wb()}if(2&e){const e=E.jc();E.rc("score",e.creditScoreGoal)}}function pe(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",44),E.Xb(1,"app-chart-progress",47),E.fc("setGoal",(function(){return E.Gc(e),E.jc().showChart=!1})),E.Wb(),E.Wb()}if(2&e){const e=E.jc();E.Db(1),E.rc("accountInfo",e.accountInfo)}}function ge(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div"),E.Xb(1,"div",48),E.Xb(2,"div",49),E.Xb(3,"app-home-accounts-grid",50),E.fc("setSavingsCommitment",(function(t){return E.Gc(e),E.jc().setSavingsCommitment(t)})),E.Wb(),E.Wb(),E.Wb(),E.Wb()}if(2&e){const e=E.jc();E.Db(3),E.rc("accounts",e.loanAccounts)("savingsAccounts",e.savings)}}function fe(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",51),E.Xb(1,"app-raf-default-tile",40),E.fc("optOutEmitter",(function(){return E.Gc(e),E.jc().showReferralOptOutModal=!0})),E.Wb(),E.Wb()}}function ve(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",52),E.Xb(1,"span",53),E.Qc(2,"Please add a "),E.Xb(3,"a",54),E.fc("click",(function(){E.Gc(e);const i=t.customerId;return E.jc().navigatePaymentMethod(i)})),E.Qc(4,"payment method"),E.Wb(),E.Qc(5,"."),E.Wb(),E.Wb()}}function Se(e,t){if(1&e&&E.Sb(0,"app-unsuccessful-payment-link",55),2&e){const e=E.jc();E.rc("showPaymentLinkingFailed",e.showPaymentLinkingFailed)}}function we(e,t){if(1&e){const e=E.Yb();E.Xb(0,"app-entry-flow",56),E.fc("hidden",(function(t){return E.Gc(e),E.jc().onEntryModalHidden(t)})),E.Wb()}if(2&e){const e=E.jc();E.rc("isEntryFlowFinished",e.isEntryFlowFinished)("flowFinishedStepThree",e.flowFinishedStepThree)("loanAccountData",e.currentLoanForEntryModel)("step",e.entryModelLatestStep)}}function ye(e,t){if(1&e){const e=E.Yb();E.Xb(0,"div",57),E.Qc(1,"Info"),E.Wb(),E.Xb(2,"p",58),E.Qc(3),E.Xb(4,"a",54),E.fc("click",(function(){return E.Gc(e),E.jc().sharedData.openPayment()})),E.Qc(5,"here"),E.Wb(),E.Qc(6," to make a payment. "),E.Wb()}if(2&e){const e=t.message;E.Db(3),E.Sc(" ",e," Click ")}}function Ae(e,t){if(1&e&&(E.Xb(0,"div",57),E.Qc(1,"Warning"),E.Wb(),E.Xb(2,"p",58),E.Qc(3),E.Wb()),2&e){const e=t.message;E.Db(3),E.Rc(e)}}function Ie(e,t){if(1&e&&(E.Xb(0,"div",57),E.Qc(1,"Warning"),E.Wb(),E.Xb(2,"p",58),E.Qc(3),E.Wb()),2&e){const e=t.message;E.Db(3),E.Rc(e)}}let Ee=(()=>{class e{constructor(e,t,i,s,o,a,n,c,r,l,h,d,u,m,b){this.accountService=e,this.applicantService=t,this.referralService=i,this.accountRLOCService=s,this.blockUIService=o,this.router=a,this.customerService=n,this.notificationService=c,this.sharedData=r,this.applicantSharedService=l,this.productCheckingService=h,this.permissionService=d,this.cdr=u,this.referFriendServiceShare=m,this.accountConsumerService=b,this.dto=new Object,this.canUpdateAutoPay=!0,this.autoPay=!0,this.dashboardFirstAccess=!1,this.showReferralOptOutModal=!1,this.showReferralTile=!1,this.showDefaultReferralTile=!1,this.showFirstAccessDialog=!1,this.showEmailVerificationDialog=!1,this.showEmailChangeUpdateDialog=!1,this.showPaymentLinkingFailed=!1,this.showPaymentMethodUpdateFailed=!1,this.showRlocAvancementDialog=!1,this.isNewApplication=!1,this.loanAutoAdvance=null,this.loansActiveData=[],this.inProgressApplicationData=[],this.savingsData=[],this.isLoaded=!1,this.showChart=!1,this.isRafAsLastTile=!1,this.isSaveRAF=!1,this.applicant=new p.a,this.showPaymentMethodError=!1,this.isShowEntryModal=!1,this.isEntryFlowFinished=!1,this.flowFinishedStepThree=!1,this.entryModelLatestStep=-1,this.currentLoanForEntryModel=null,this.isShowToggleSwitchProduct=!1,this.totalLoan=[],this.showBusinessCredit=!1,this.creditScoreGoal=600,this.missedPaymentTime=[],this.rlocEnabled=!1,this.isShowMembershipRenewalDialog=!1,this.rlocEnabled=this.permissionService.isGranted(y.a.RLOC_ENABLE)}get loanAccounts(){return this.isLoaded?[...this.loansActiveData,...this.inProgressApplicationData]:[]}get savings(){return this.isLoaded?[...this.savingsData]:[]}get canOpenNewAccountRloc(){return this.sharedData.reapplyStatusRloc===v.b.REAPPLY_IMMEDIATELY&&this.rlocEnabled}ngOnInit(){this.showEmailVerificationDialog=!1,this.email=localStorage.getItem(c.a.EMAIL),this.customerUuid=localStorage.getItem(c.a.CUSTOMER_UUID),this.customerId=+localStorage.getItem(c.a.CUSTOMER_ID),this.sharedData.setDefaultValueReapplyGlobal(),this.blockUIService.startBlockUi(),Promise.all([this.getCustomerInformation(),this.getInfoMortgage(),this.getApplicantData(),this.getMissedPaymentTime(),this.getMembershipRenewal()]).then(()=>{this.blockUIService.stopBlockUi(),this.showNotificationAutoPayAndMissesPay(),this.makePaymentCallback=this.sharedData.makePaymentCallback.subscribe(e=>{e&&this.getDataSummary()})}).catch(e=>{this.blockUIService.stopBlockUi()}),this.getGoalScore(),this.checkRemovePaymentMethod(this.customerId,this.customerUuid),this.customerService.customerUiState.subscribe(e=>{const{clients:t={}}=e||{};this.toggleProduct=this.customerService.getProductLatestClient(t),this.isShowToggleSwitchProduct=this.customerService.showToggleSwitchProduct(t)}),this.accountRLOCService.autoAdvance.subscribe(e=>{e&&(this.showRlocAvancementDialog=e.enable,this.loanAutoAdvance=Object.assign(Object.assign({},this.loanAutoAdvance),{savingsCommitmentAmount:e.savingsCommitmentAmount||0,advanceRlocTransactionDate:e.advanceDate}))}),this.membershipRenewalCallback=this.sharedData.membershipRenewal.subscribe(e=>{const{isShowDialog:t,data:i}=e||{};this.isShowMembershipRenewalDialog=t,this.membershipRenewal=i})}ngAfterViewInit(){this.cdr.detectChanges()}ngOnDestroy(){var e,t,i;this.closeAlert(this.customerId),null===(e=this.makePaymentCallback)||void 0===e||e.unsubscribe(),null===(t=this.dashboardAdditionalSubscription)||void 0===t||t.unsubscribe(),null===(i=this.membershipRenewalCallback)||void 0===i||i.unsubscribe()}getMissedPaymentTime(){return new Promise((e,t)=>{this.accountRLOCService.getMissedPaymentTime(this.customerUuid).subscribe(t=>{e(!0),this.missedPaymentTime=Array.isArray(t)&&(null==t?void 0:t.length)>0?t:[]},t=>{e(!0),this.showToastError()})})}getApplicantData(){return new Promise((e,t)=>{this.applicantService.applicant.subscribe(t=>{e(!0),this.applicant=t,localStorage.setItem(c.a.APPLICANT_UUID,t.uuid),localStorage.setItem(c.a.APPLICATION_ID,t.latestApplicationId),this.isLoadingAfterLogin()},t=>{e(!0),this.showToastError()}).unsubscribe()})}setSavingsCommitment(e){this.currentLoanForEntryModel=e,this.isShowEntryModal=!0,this.entryModelLatestStep=3}getDataSummary(){this.blockUIService.startBlockUi(),this.loansActiveData.splice(0),this.savingsData.splice(0),this.accountService.getByPollingDashboardByCustomerId(this.customerUuid,g.c.CONSUMER).subscribe(e=>{this.handleAccountSummaryData(e),this.blockUIService.stopBlockUi()},e=>{this.getNoLoanAccountWelcome(),this.isLoaded=!0,this.blockUIService.stopBlockUi()})}getLast4CharLoanAccountNumber(e){return e?e.slice(e.length-4):""}getApplicationStatus(){this.customerUuid&&this.customerService.getGlobalReapply(this.customerUuid).subscribe(e=>{this.sharedData.setDefaultValueReapplyGlobal(),this.customerService.reapplyGlobal.next(e);const{CONSUMER:t,RLOC:i}=e||{};if(this.isLoaded=!0,this.inProgressApplicationData=[],null==t?void 0:t.isContinuePending){const e=new h.a(Object.assign(Object.assign({},t),{type:g.c.CONSUMER}));this.inProgressApplicationData.push(e)}if((null==i?void 0:i.isContinuePending)&&this.rlocEnabled){const e=new h.a(Object.assign(Object.assign({},i),{type:g.c.RLOC}));this.inProgressApplicationData.push(e)}},e=>{this.isLoaded=!0})}isLoadingAfterLogin(){this.customerService.getFailedPaymentVerificationStatus(this.customerUuid).subscribe(e=>{(null==e?void 0:e.displayPlaidVerificationFailedDashboardPopup)&&(null==e?void 0:e.displayPlaidVerificationFailedPaymentDetailsMessage)?this.showPaymentMethodUpdateFailed=!0:((null==e?void 0:e.displayPlaidVerificationFailedDashboardPopup)&&(this.showPaymentLinkingFailed=!0),(null==e?void 0:e.displayPlaidVerificationFailedPaymentDetailsMessage)&&(localStorage.setItem(c.a.NOTIFY_FAILED_PLAID_VERIFICATION_PAYMENT,null==e?void 0:e.displayPlaidVerificationFailedDashboardPopup),this.showPaymentMethodUpdateFailed=!1),this.blockUIService.stopBlockUi())},e=>{this.blockUIService.stopBlockUi()})}onOptOutConfirm(){this.referralService.removeRAF(this.email).subscribe(e=>{this.showReferralTile=!1,this.showDefaultReferralTile=!1})}getWelcome(e){switch(null==e?void 0:e.greetingType){case"ACTIVE_LOAN":this.greetingContent="Here\u2019s a summary of your accounts. Keep up your on-time payments to build positive payment history. It\u2019s 35% of your FICO Score 8.";break;case"OVER_DUE_PAYMENT":this.greetingContent="Uh oh! Looks like you have a past due payment. Make a payment to build positive payment history and avoid late fee reporting.";break;case"SAVINGS_ONLY":this.greetingContent="Here\u2019s a summary of your accounts. We\u2019ll be here to help you unlock your next big credit goal.";break;case"ELIGIBLE_OPEN_NEW_ACCOUNT":this.greetingContent="Here\u2019s an overview of where your accounts will be. Open a credit builder account to unlock your credit building goals!";break;case"ADD_REVOLVE_SCENARIO":this.greetingContent="";break;case"INELIGIBLE_OPEN_NEW_ACCOUNT":default:this.greetingContent="Check back soon to see when you\u2019re eligible to open a credit builder account with us."}}getCustomerInformation(){this.accountService.dashboard.subscribe(e=>{e?(this.applicant.loanAccountId=e.loanAccountId,this.applicant.loanAccountStatus=e.loanAccountStatus,this.accountInfo=e,this.handleAccountSummaryData(e),localStorage.setItem(c.a.ACCOUNT_STATUS,null==e?void 0:e.loanAccountStatus),localStorage.setItem(c.a.IS_LAST_CHARGE_FAILED,null==e?void 0:e.isLastChargeFailed),localStorage.setItem(c.a.IS_REFERRAL_ELIGIBLE,null==e?void 0:e.isReferralEligible),(null==e?void 0:e.isReferralEligible)&&(this.referralService.setEligibleMember(!0),this.getReferralInfo()),this.isRafAsLastTile=(null==e?void 0:e.rafInterest)||this.isRafAsLastTile):(this.getNoLoanAccountWelcome(),this.sharedData.hasNeverHadActiveLoan=!0,this.isLoaded=!0)}).unsubscribe(),this.accountService.accounts.subscribe(e=>{e.some(e=>e.isLoan&&e.isUnpaid)&&(this.unpaidLoanType=e.find(e=>e.isLoan&&e.isUnpaid).type,this.showPaymentMethodError=!0)}).unsubscribe()}getReferralInfo(){return new Promise((e,t)=>{const i="false"!==localStorage.getItem(c.a.SHOW_DEFAULT_TILE);this.customerUuid?this.referralService.getRAFProgressRewards(this.customerUuid).subscribe(t=>{e(!0);const s=null==t?void 0:t.memberStatus;switch(localStorage.setItem(c.a.RAF_MEMBER_STATUS,s),s){case"QUALIFIED_TO_PARTICIPATE":case"OPTED_OUT":case"DEACTIVATED_DUE_TO_INACTIVE":this.showDefaultReferralTile=i,this.showReferralTile=!1;break;case"ACTIVE":this.showDefaultReferralTile=!1,this.showReferralTile=!0;break;default:this.showDefaultReferralTile=!1,this.showReferralTile=!1}},t=>{e(!0)}):e(!0)})}getInfoMortgage(){return new Promise((e,t)=>{this.customerService.getInfoMortgageSubmition(this.customerUuid).subscribe(t=>{e(!0),this.interests=null==t?void 0:t.interests,this.isInterestSubmitted=null==t?void 0:t.isInterestSubmitted},t=>{e(!0),this.showToastError()})})}onUpdateInterestSelection(e){this.interests=[],this.isInterestSubmitted=!1,e&&this.getInfoMortgage().then(()=>{this.notificationService.success("Success","Submitted successfully!")}).catch(e=>{})}getNoLoanAccountWelcome(){this.blockUIService.startBlockUi(),Object(b.a)([this.accountService.getByPollingDashboardByCustomerId(this.customerUuid,g.c.CONSUMER),this.customerService.getGlobalReapply(this.customerUuid)]).subscribe(e=>{const[t,i]=e;this.customerService.reapplyGlobal.next(i);const{accountSummaryCombined:s}=t||{},{loans:o=[],savings:a=[]}=s||{},n=o.filter(e=>e.status===d.c.ACTIVE).length>0,c=a.length>0,{CONSUMER:r,RLOC:l}=i||{},{reapplyStatus:h}=r||{},{reapplyStatus:u}=l||{},m=[h,u].includes(A.b.REAPPLY_IMMEDIATELY);if(n||c||m){if(!m)return;this.getWelcome({greetingType:"ELIGIBLE_OPEN_NEW_ACCOUNT"})}else this.getWelcome();this.blockUIService.stopBlockUi()},e=>{this.isLoaded=!0,this.blockUIService.stopBlockUi()})}checkRemovePaymentMethod(e,t){this.customerService.getById(t).subscribe(t=>{const{emailVerified:i=!1}=t||{};this.customerID=t.id,this.customerService.customerInfo.next(t),(null==t?void 0:t.currentPaymentFailedVerification)&&this.showAddPaymentMethodAlert(e),u.a.isCurrentNOAAStep()&&"true"!==localStorage.getItem(c.a.HAS_ANY_CREDIT_SCORES)||(this.dashboardFirstAccess="true"===localStorage.getItem(c.a.DASHBOARD_FIRST_ACCESS)),i?(this.showFirstAccessDialog=this.dashboardFirstAccess,this.dashboardFirstAccess&&localStorage.setItem(c.a.DASHBOARD_FIRST_ACCESS,null)):this.showEmailVerificationDialog=!0,(null==t?void 0:t.payments)&&(null==t?void 0:t.payments.length)&&(null==t||t.payments.forEach(e=>{e.verificationStatus!==w.a.PENDING_MANUAL_VERIFICATION&&e.verificationStatus!==w.a.PENDING_AUTOMATIC_VERIFICATION||this.notificationService.info("","You won\u2019t be able to make a payment with the new payment source until it's verified by the third party linking services (Finicity/Plaid). If you wish to make a payment before the new payment is verified, the payment will be processed using your previous verified payment source on file.",{timeOut:5e3,pauseOnHover:!0,clickToClose:!0,theClass:"mt-40 content-only"})}))},e=>{this.blockUIService.stopBlockUi()})}showAddPaymentMethodAlert(e){this.notificationService.html(this.addPaymentMethod,m.a.Info,{timeOut:5e3,clickToClose:!0,clickIconToClose:!1,theClass:"mt-30",id:e},"info","")}navigatePaymentMethod(e){this.router.navigate([S.a[this.productCheckingService.currentProductCode]+"my-profile/payment-method"]),this.closeAlert(e)}closeAlert(e){this.notificationService.remove(e)}showToastError(){this.notificationService.error("Error","Something went wrong. Please, contact tech support if the problem persists.",{timeOut:3e3,pauseOnHover:!0,clickToClose:!0})}getEntryModalState(){this.customerService.getLatestClient(localStorage.getItem(c.a.EMAIL)).subscribe(e=>{e&&(this.isEntryFlowFinished=e.finishRlocEntryFlow,this.flowFinishedStepThree=e.finishRlocEntryFlow,this.entryModelLatestStep=e.rlocEntryFlowStep,e.finishRlocEntryFlow||this.openEntryModal(e.rlocEntryFlowStep,e.rlocEntryFlowLoanAccountId))},e=>this.showToastError())}onEntryModalHidden(e){if(this.isShowEntryModal=!1,this.isEntryFlowFinished=!0,e.id){const t=this.loansActiveData.splice(0);for(let i=0;i<t.length;i++)t[i].id===e.id&&(t[i]=e);this.loansActiveData=t}}onUnpaidAdminFeeHidden(){this.showPaymentMethodError=!1}openEntryModal(e,t){if(this.loansActiveData){const i=this.loansActiveData.filter(e=>e instanceof r.a&&e.type===g.c.RLOC&&("ACTIVE"===e.status||"NEW"===e.status)&&e.id===t);i.length&&(this.entryModelLatestStep=e,this.isShowEntryModal=!0,this.currentLoanForEntryModel=i[i.length-1])}}handleAccountSummaryData(e){var t;const i=this.getLoansForProduct(null==e?void 0:e.accountSummary,g.c.RLOC),{loans:s=[],savings:o=[],closedAccounts:a=[]}=null==e?void 0:e.accountSummaryCombined,n=[...s,...o,...a];this.totalLoan=s,this.dashboardAdditionalSubscription=this.accountService.dashboardAdditional.subscribe(e=>{(null==e?void 0:e.greetingType)?this.getWelcome({greetingType:null==e?void 0:e.greetingType}):this.getNoLoanAccountWelcome()}),i.length>0&&this.accountRLOCService.getAutoAdvance(null===(t=i[0])||void 0===t?void 0:t.id).subscribe(e=>{this.loanAutoAdvance=i[0],this.accountRLOCService.autoAdvance.next(e)}),s.forEach(e=>{this.loansActiveData.push(new r.a(Object.assign(Object.assign({},e),{productBrandingName:e.productBrandingName||e.productName})))}),o.forEach(e=>{this.savingsData.push(new l.a(Object.assign({},e)))}),this.sharedData.hasNeverHadActiveLoan=0===n.length,this.rlocEnabled&&this.getEntryModalState(),this.getApplicationStatus()}handleNotification(e,t,i){const s={message:""};let o="info",a=m.a.Info,n={timeOut:3e3,clickToClose:!0,clickIconToClose:!1,theClass:"",id:""};switch(t){case f.a.ADD_PAYMENT_METHOD:n=Object.assign(Object.assign({},n),{timeOut:5e3,theClass:"mt-30",id:null==i?void 0:i.customerId});break;case f.a.AUTOPAY_DISABLED:s.message="AutoPay has been disabled until your past due amounts and/or fees have been satisfied for "+(null==i?void 0:i.accountNumber),n=Object.assign(Object.assign({},n),{id:null==i?void 0:i.accountNumber});break;case f.a.PAST_DUE_OR_FEE:s.message="Looks like you have missed your last payment for "+(null==i?void 0:i.accountNumber)+". Missing payments could potentially harm your credit score. Please verify your payment method and complete your payment as soon as possible.",n=Object.assign(Object.assign({},n),{id:null==i?void 0:i.accountNumber}),o="warn",a=m.a.Warn}this.notificationService.html(e,a,n,o,s)}getLoansForProduct(e,t){var i;return e&&(null===(i=e[t])||void 0===i?void 0:i.loans)||[]}getSavingsForProduct(e,t){var i;return e&&(null===(i=e[t])||void 0===i?void 0:i.savings)||[]}getCloseLoansForProduct(e,t){var i;return e&&(null===(i=e[t])||void 0===i?void 0:i.savings)||[]}showNotificationAutoPayAndMissesPay(){var e;const t=[],i=[];let s="",o="";this.totalLoan.forEach(e=>{e.canUpdateAutoPay||e.autoPay||t.push(e.accountNumber),e.missedPayment>0&&i.push(e.accountNumber)}),t.forEach((e,i)=>{const o=i<t.length-2?" , ":i===t.length-1?"":" and ";s+=`${this.getLast4CharLoanAccountNumber(e)}${o}`}),i.forEach((e,t)=>{const s=t<i.length-2?" , ":t===i.length-1?"":" and ";o+=`${this.getLast4CharLoanAccountNumber(e)}${s}`}),s.length&&this.handleNotification(this.autoPayDisabled,f.a.AUTOPAY_DISABLED,{accountNumber:s}),(o.length||(null===(e=this.missedPaymentTime)||void 0===e?void 0:e.length))&&this.handleNotification(this.pastDueOrFeeAlert,f.a.PAST_DUE_OR_FEE,{accountNumber:o})}onSetCreditScoreGoal(e){this.showChart=!0,this.creditScoreGoal=e}getGoalScore(){this.customerService.customerInfo.subscribe(e=>{e&&e.creditScoreGoal>0&&(this.creditScoreGoal=e.creditScoreGoal,this.showChart=!0)})}handleSetCommitment(e){this.accountRLOCService.postAutoAdvance(e.id,"disable").subscribe(t=>{this.currentLoanForEntryModel=new r.a(e),this.showRlocAvancementDialog=!1,this.isShowEntryModal=!0,this.entryModelLatestStep=3},e=>this.showToastError())}onCloseRlocAdvancement(){this.showEmailVerificationDialog||this.accountRLOCService.postAutoAdvance(this.loanAutoAdvance.id,"disable").subscribe(e=>this.showRlocAvancementDialog=!1,e=>this.showToastError())}onCloseEmailVerificationDialog(){this.showEmailVerificationDialog=!1}onReferAFriendIframeLoaded(e){this.blockUIService.stopBlockUi(),this.isSaveRAF||this.referFriendServiceShare.saveRAF(this.customerUuid).subscribe(e=>{(null==e?void 0:e.active)&&(null==e?void 0:e.rrMemberId)&&(this.isSaveRAF=!0)},e=>{this.notificationService.error("Error","Something went wrong. Please, contact tech support if the problem persists.",{timeOut:3e3,pauseOnHover:!0,clickToClose:!0})})}closeMembershipRenewalDialog(){this.sharedData.membershipRenewal.next({isShowDialog:!1,data:this.membershipRenewal})}chooseAccount(e){this.blockUIService.startBlockUi();const{id:t}=e||{};this.accountConsumerService.setMembershipRenewalByLoanId(t).subscribe(e=>{this.blockUIService.stopBlockUi(),this.refreshTileAccount(this.membershipRenewal),this.getMembershipRenewal()},e=>{this.blockUIService.stopBlockUi(),this.notificationService.error("Error","Something went wrong. Please, contact tech support if the problem persists.",{timeOut:3e3,pauseOnHover:!0,clickToClose:!0})})}getMembershipRenewal(){this.blockUIService.startBlockUi(),this.accountConsumerService.getMembershipRenewalByLoanId(this.customerUuid).subscribe(e=>{this.blockUIService.stopBlockUi(),this.checkErrorMembershipRenewal(e)},e=>{this.blockUIService.stopBlockUi(),this.notificationService.error("Error","Something went wrong. Please, contact tech support if the problem persists.",{timeOut:3e3,pauseOnHover:!0,clickToClose:!0})})}checkErrorMembershipRenewal(e){this.membershipRenewal=e.map(e=>{const{chargeStatus:t,vantivMessage:i,achMessage:s}=(null==e?void 0:e.chargeDTO)||{};switch(t){case I.b.NOT_APPROVED:const t=[I.c.AUTHORIZED_PENDING_REVIEW,I.c.DECLINED].includes(i)?I.a.TRANSACTION_DECLINED:i;return e.chargeDTO.errorReason=t||s,e;case I.b.INTERNAL_SYSTEM_ERROR:return e.chargeDTO.errorReason=I.a.SYSTEM_ERROR,e}});const t=this.membershipRenewal.filter(e=>{var t;return null===(t=null==e?void 0:e.chargeDTO)||void 0===t?void 0:t.errorReason})||[];this.sharedData.membershipRenewal.next({isShowDialog:t.length>0,data:e})}refreshTileAccount(e){(e||[]).find(e=>2===(null==e?void 0:e.membershipFeePaymentFailures))&&this.getDataSummary()}}return e.\u0275fac=function(t){return new(t||e)(E.Rb(D.a),E.Rb(D.b),E.Rb(C.k),E.Rb(R.a),E.Rb(O.a),E.Rb(s.f),E.Rb(D.f),E.Rb(m.b),E.Rb(P.a),E.Rb(D.b),E.Rb(L.a),E.Rb(T.a),E.Rb(E.h),E.Rb(D.j),E.Rb(C.a))},e.\u0275cmp=E.Lb({type:e,selectors:[["app-home"]],viewQuery:function(e,t){var i;1&e&&(E.Wc(te,!0),E.Wc(ie,!0),E.Wc(se,!0),E.Wc(oe,!0)),2&e&&(E.Cc(i=E.gc())&&(t.addPaymentMethod=i.first),E.Cc(i=E.gc())&&(t.pastDueOrFeeAlert=i.first),E.Cc(i=E.gc())&&(t.autoPayDisabled=i.first),E.Cc(i=E.gc())&&(t.missedPay=i.first))},decls:50,vars:29,consts:[[1,"container","pt-15","pb-30"],[4,"ngIf"],[1,"row","block-md","flex-xs","flex-column-reverse-xs","flex-sm","flex-column-reverse-sm"],[1,"col-md-3"],[1,"mb-15","hide-greeting"],["class","hide-greeting",4,"ngIf","ngIfElse"],["canNotOpenNewAccountRloc",""],["class","mb-15",4,"ngIf"],[1,"mb-15","hidden-xs","hidden-sm"],[3,"openBusinessCredit"],[1,"mb-15"],[3,"customerIDCS"],["class","mb-15 mt-15 hidden-sm hidden-xs",4,"ngIf"],[1,"mb-15","hidden-md","hidden-lg"],[1,"row","m-0"],[1,"col-md-9"],[4,"ngIf","ngIfElse"],["canNotOpenAccountRloc",""],[3,"score","setScoreEmitter",4,"ngIf"],["class","cs-card",4,"ngIf"],["class","mb-15 hidden-md hidden-lg hidden-xl",4,"ngIf"],["addPaymentMethod",""],[3,"showPaymentLinkingFailed",4,"ngIf"],[3,"showPaymentMethodUpdateFailed"],[3,"visible","visibleChange","confirmOptOutEmitter"],[3,"showEmailVerificationDialog","email","onClose"],[3,"isEntryFlowFinished","flowFinishedStepThree","loanAccountData","step","hidden",4,"ngIf"],[3,"visible","account","setCommitment","onCloseRlocAdvancement"],[3,"showFirstAccessDialog","dto","onCloseCongratz"],[3,"visible","loanAccountType","visibleChange","hidden"],[3,"show","onCloseBusinessCredit"],["autoPayDisabled",""],["missedPay",""],["pastDueOrFeeAlert",""],[3,"visible","accounts","visibleChange","close","chooseAccount"],[3,"product"],[1,"hide-greeting"],[1,"cs-card","hide-greeting"],[1,"text-20","color-blue-700","text-center","font-weight-bold","letter-spacing-bold"],[1,"welcome-text","text-12","text-center","color-gray-800","letter-spacing-regular","mt-10","percent-height-50"],[3,"optOutEmitter"],[1,"sharing-widget",3,"loaded"],[3,"interests","isInterestSubmitted","onUpdateInterestSelection"],[1,"mb-15","mt-15","hidden-sm","hidden-xs"],[1,"cs-card"],[1,"welcome-text","text-12","text-center","color-gray-800","letter-spacing-regular","mt-10","percent-height-60"],[3,"score","setScoreEmitter"],[3,"accountInfo","setGoal"],[1,"row"],[1,"col-md-12","pl-0","pr-0"],[3,"accounts","savingsAccounts","setSavingsCommitment"],[1,"mb-15","hidden-md","hidden-lg","hidden-xl"],[1,"add-payment-alert"],[1,"color-gray-800"],[3,"click"],[3,"showPaymentLinkingFailed"],[3,"isEntryFlowFinished","flowFinishedStepThree","loanAccountData","step","hidden"],[1,"sn-title"],[1,"font-10","color-gray-1200","pl-16"]],template:function(e,t){if(1&e&&(E.Xb(0,"div",0),E.Oc(1,ae,2,1,"div",1),E.Xb(2,"div",2),E.Xb(3,"div",3),E.Xb(4,"div",4),E.Oc(5,ne,1,0,"rloc-greetings-tile",5),E.Oc(6,ce,5,1,"ng-template",null,6,E.Pc),E.Wb(),E.Oc(8,re,2,0,"div",7),E.Oc(9,le,2,0,"div",7),E.Xb(10,"div",8),E.Xb(11,"app-account-product-exploration",9),E.fc("openBusinessCredit",(function(){return t.showBusinessCredit=!0})),E.Wb(),E.Wb(),E.Xb(12,"div",10),E.Sb(13,"app-open-sky",11),E.Wb(),E.Xb(14,"div"),E.Sb(15,"app-market-place"),E.Wb(),E.Oc(16,he,2,2,"div",7),E.Oc(17,de,2,0,"div",12),E.Xb(18,"div",13),E.Xb(19,"div",14),E.Xb(20,"app-account-product-exploration",9),E.fc("openBusinessCredit",(function(){return t.showBusinessCredit=!0})),E.Wb(),E.Wb(),E.Wb(),E.Wb(),E.Xb(21,"div",15),E.Xb(22,"div",13),E.Oc(23,ue,1,0,"rloc-greetings-tile",16),E.Oc(24,me,5,1,"ng-template",null,17,E.Pc),E.Wb(),E.Xb(26,"div",10),E.Oc(27,be,1,1,"app-progress-tracking",18),E.Oc(28,pe,2,1,"div",19),E.Wb(),E.Oc(29,ge,4,2,"div",1),E.Wb(),E.Wb(),E.Oc(30,fe,2,0,"div",20),E.Wb(),E.Oc(31,ve,6,0,"ng-template",null,21,E.Pc),E.Oc(33,Se,1,1,"app-unsuccessful-payment-link",22),E.Sb(34,"app-unsuccessful-payment-method-update",23),E.Xb(35,"app-referral-opt-out",24),E.fc("visibleChange",(function(e){return t.showReferralOptOutModal=e}))("confirmOptOutEmitter",(function(){return t.onOptOutConfirm()})),E.Wb(),E.Xb(36,"app-email-verification-step",25),E.fc("onClose",(function(){return t.onCloseEmailVerificationDialog()})),E.Wb(),E.Oc(37,we,1,4,"app-entry-flow",26),E.Xb(38,"rloc-advancement-modal",27),E.fc("setCommitment",(function(e){return t.handleSetCommitment(e)}))("onCloseRlocAdvancement",(function(){return t.onCloseRlocAdvancement()})),E.Wb(),E.Xb(39,"app-congratz",28),E.fc("onCloseCongratz",(function(){return t.isLoadingAfterLogin()})),E.Wb(),E.Xb(40,"app-payment-method",29),E.fc("visibleChange",(function(e){return t.showPaymentMethodError=e}))("hidden",(function(){return t.onUnpaidAdminFeeHidden()})),E.Wb(),E.Xb(41,"app-business-credit-modal",30),E.fc("onCloseBusinessCredit",(function(){return t.showBusinessCredit=!1})),E.Wb(),E.Sb(42,"app-payment-failed-modal"),E.Oc(43,ye,7,1,"ng-template",null,31,E.Pc),E.Oc(45,Ae,4,1,"ng-template",null,32,E.Pc),E.Oc(47,Ie,4,1,"ng-template",null,33,E.Pc),E.Xb(49,"app-payment-membership-renewal",34),E.fc("visibleChange",(function(e){return t.isShowMembershipRenewalDialog=e}))("close",(function(){return t.closeMembershipRenewalDialog()}))("chooseAccount",(function(e){return t.chooseAccount(e)})),E.Wb()),2&e){const e=E.Dc(7),i=E.Dc(25);E.Db(1),E.rc("ngIf",t.isShowToggleSwitchProduct),E.Db(4),E.rc("ngIf",t.canOpenNewAccountRloc&&!t.greetingContent)("ngIfElse",e),E.Db(3),E.rc("ngIf",t.showDefaultReferralTile&&!!t.isRafAsLastTile),E.Db(1),E.rc("ngIf",t.showReferralTile),E.Db(4),E.rc("customerIDCS",t.customerID),E.Db(3),E.rc("ngIf",t.interests&&t.interests.length),E.Db(1),E.rc("ngIf",t.showDefaultReferralTile&&!t.isRafAsLastTile),E.Db(6),E.rc("ngIf",t.canOpenNewAccountRloc&&!t.greetingContent)("ngIfElse",i),E.Db(4),E.rc("ngIf",!t.showChart),E.Db(1),E.rc("ngIf",t.showChart),E.Db(1),E.rc("ngIf",t.isLoaded),E.Db(1),E.rc("ngIf",t.showDefaultReferralTile&&!t.isRafAsLastTile),E.Db(3),E.rc("ngIf",t.showPaymentLinkingFailed),E.Db(1),E.rc("showPaymentMethodUpdateFailed",!t.isShowEntryModal&&t.showPaymentMethodUpdateFailed),E.Db(1),E.rc("visible",t.showReferralOptOutModal),E.Db(1),E.rc("showEmailVerificationDialog",!t.showPaymentMethodError&&!t.isShowEntryModal&&t.showEmailVerificationDialog)("email",t.email),E.Db(1),E.rc("ngIf",!t.showPaymentMethodError&&t.isShowEntryModal&&t.currentLoanForEntryModel),E.Db(1),E.rc("visible",!t.showEmailVerificationDialog&&t.showRlocAvancementDialog)("account",t.loanAutoAdvance),E.Db(1),E.rc("showFirstAccessDialog",t.showFirstAccessDialog)("dto",t.applicant),E.Db(1),E.rc("visible",t.showPaymentMethodError)("loanAccountType",t.unpaidLoanType),E.Db(1),E.rc("show",t.showBusinessCredit),E.Db(8),E.rc("visible",t.isShowMembershipRenewalDialog)("accounts",t.membershipRenewal)}},directives:[M.o,k.a,U.a,F.a,N.a,W.a,_.a,X.a,B.a,G.a,V.a,j.a,x.a,Y.a,H.a,Q.a,J.a,z.a,K.a,$.a,q.a,Z.a,ee.a],styles:[".hide-greeting[_ngcontent-%COMP%]{display:block}@media screen and (max-width:991px){.hide-greeting[_ngcontent-%COMP%]{display:none}}a[_ngcontent-%COMP%]{text-decoration:underline;color:#3084c6}  app-raf-share-widget.sharing-widget iframe{min-height:400px!important}@media (max-width:450px){  app-raf-share-widget.sharing-widget iframe{min-height:515px!important}}@media (min-width:992px){  app-raf-share-widget.sharing-widget iframe{min-height:600px!important}}@media (min-width:1200px){  app-raf-share-widget.sharing-widget iframe{min-height:450px!important}}"]}),e})();var De=i("7vJP"),Ce=i("3Pt+"),Re=i("H6nA"),Oe=i("rLzU");const Pe=[{path:"",component:Ee,canActivate:[o.a,a.a,n.a]}];let Le=(()=>{class e{}return e.\u0275mod=E.Pb({type:e}),e.\u0275inj=E.Ob({factory:function(t){return new(t||e)},imports:[[M.c,Ce.f,Ce.q,s.i,Oe.b,Re.a,De.a,s.i.forChild(Pe)]]}),e})()}}]);