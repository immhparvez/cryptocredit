(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{piKH:function(t,n,c){"use strict";c.r(n),c.d(n,"AccountConsumerModule",(function(){return U}));var a=c("ofXK"),o=c("3Pt+"),i=c("tyNb"),s=c("H6nA"),e=c("hGdz"),u=c("9sNl"),r=c("mImb"),l=c("nDdO"),d=c("6EVO"),h=c("+3se"),b=c("DwFR"),m=c("bB6Z"),v=c("2SBO"),g=c("1mV4"),p=c("nXTA"),f=c("fXoL"),A=c("uJzi"),S=c("vbr4"),y=c("8SrD"),N=c("MBEY"),D=c("iaCz"),C=c("2yF6"),P=c("oOAL"),I=c("SBLJ"),O=c("YDHa");function x(t,n){if(1&t&&f.Sb(0,"app-account-savings",5),2&t){const t=f.jc(3);f.rc("savingsData",t.currentAccount)("faqData",t.faqData)}}function q(t,n){if(1&t&&f.Sb(0,"app-account-loan",6),2&t){const t=f.jc(3);f.rc("loanData",t.currentAccount)("faqData",t.faqData)}}function w(t,n){if(1&t&&(f.Vb(0),f.Oc(1,x,1,2,"app-account-savings",3),f.Oc(2,q,1,2,"app-account-loan",4),f.Ub()),2&t){const t=f.jc(2);f.Db(1),f.rc("ngIf",(null==t.currentAccount?null:t.currentAccount.isSavings)&&t.faqData),f.Db(1),f.rc("ngIf",null==t.currentAccount?null:t.currentAccount.isLoan)}}function L(t,n){if(1&t&&f.Sb(0,"app-account-recently-closed",13),2&t){const t=f.jc(3);f.rc("accounts",t.closedAccounts)}}function j(t,n){if(1&t){const t=f.Yb();f.Xb(0,"div",7),f.Xb(1,"div",8),f.Xb(2,"div",9),f.Xb(3,"app-account-product-exploration",10),f.fc("openBusinessCredit",(function(){return f.Gc(t),f.jc(2).showBusinessCredit=!0})),f.Wb(),f.Oc(4,L,1,1,"app-account-recently-closed",11),f.Wb(),f.Wb(),f.Xb(5,"div"),f.Xb(6,"app-business-credit-modal",12),f.fc("onCloseBusinessCredit",(function(){return f.Gc(t),f.jc(2).showBusinessCredit=!1})),f.Wb(),f.Wb(),f.Wb()}if(2&t){const t=f.jc(2);f.Db(4),f.rc("ngIf",null==t.closedAccounts?null:t.closedAccounts.length),f.Db(2),f.rc("show",t.showBusinessCredit)}}function k(t,n){if(1&t){const t=f.Yb();f.Vb(0),f.Xb(1,"app-account-header",1),f.fc("nextPage",(function(){return f.Gc(t),f.jc().onNextPage()}))("prevPage",(function(){return f.Gc(t),f.jc().onPrevPage()})),f.Wb(),f.Oc(2,w,3,2,"ng-container",0),f.Oc(3,j,7,2,"div",2),f.Ub()}if(2&t){const t=f.jc();f.Db(1),f.rc("pageIndex",t.accountIndex)("pages",t.accounts),f.Db(1),f.rc("ngIf",t.currentAccount),f.Db(1),f.rc("ngIf",null==t.currentAccount?null:t.currentAccount.isProductExploration)}}const B=[{path:"",component:(()=>{class t{constructor(t,n,c,a,o,i,s){this.route=t,this.router=n,this.accountSharedService=c,this.sharedData=a,this.faqService=o,this.productCheckingService=i,this.datePipe=s,this.accounts=[],this.accountIndex=0,this.closedAccounts=[],this.isPaymentSatisfied=!1,this.PRODUCT_CODE=v.c,this.showBusinessCredit=!1}get currentAccount(){return this.accounts[this.accountIndex]}get routingPath(){return m.a[this.productCheckingService.currentProductCode]}ngOnInit(){this.querySubscribe=this.route.queryParams.subscribe(({number:t})=>{this.accountNumber!==t&&(this.accountNumber=t),this.filterAccounts()}),this.makePaymentCallback=this.sharedData.makePaymentCallback.subscribe(t=>{t&&(this.getAccounts(),this.filterAccounts())}),this.cancelPendingPaymentCallback=this.sharedData.cancelPendingPaymentCallback.subscribe(t=>{t&&this.filterAccounts()})}filterAccounts(){this.accountSubscribe=this.accountSharedService.getByPollingDashboardByCustomerId(localStorage.getItem(p.a.CUSTOMER_UUID),v.c.CONSUMER).subscribe(t=>{var n,c,a,o,i,s,e,u,r,l,d,m;if(this.accounts.splice(0),t||(t={accountSummaryCombined:[]}),t&&t.accountSummaryCombined){const g=(null===(c=null===(n=null==t?void 0:t.accountSummaryCombined)||void 0===n?void 0:n.loans)||void 0===c?void 0:c.map(t=>Object.assign(Object.assign({},t),{productInfo:h.a.mapDataProductLogo((null==t?void 0:t.productBrandingName)||(null==t?void 0:t.productName)||"",b.a.LOAN),nextPayment:this.getNextPayment(t),isPaymentSatisfied:this.isPaymentSatisfied,mode:(null==t?void 0:t.type)===v.c.RLOC?b.a.RLOC:b.a.LOAN})))||[],p=(null===(o=null===(a=null==t?void 0:t.accountSummaryCombined)||void 0===a?void 0:a.savings)||void 0===o?void 0:o.map(t=>Object.assign(Object.assign({},t),{productInfo:h.a.mapDataProductLogo((null==t?void 0:t.productBrandingName)||(null==t?void 0:t.productName)||"",(null==t?void 0:t.isSavingsUnlocked)?b.a.SAVING_UNLOCK:b.a.SAVING_LOCK),mode:(null==t?void 0:t.isSavingsUnlocked)?b.a.SAVING_UNLOCK:b.a.SAVING_LOCK})))||[],f=((null===(i=null==t?void 0:t.accountSummaryCombined)||void 0===i?void 0:i.closedAccounts)||[]).map(t=>Object.assign(Object.assign({},t),{mode:b.a.LOAN})),A=((null===(s=null==t?void 0:t.accountSummaryCombined)||void 0===s?void 0:s.closedSavingsAccounts)||[]).map(t=>Object.assign(Object.assign({},t),{mode:(null==t?void 0:t.isSavingsUnlocked)?b.a.SAVING_UNLOCK:b.a.SAVING_LOCK}));if(this.closedAccounts=[...f,...A],this.accounts.push(...g,...p),this.accounts=[...this.accounts].sort((t,n)=>n.accountOpenDate-t.accountOpenDate),this.accounts.push({isProductExploration:!0}),this.loanAccountNumber=null,this.savingsAccountNumber=null,this.accountNumber){const n=[].concat((null===(e=null==t?void 0:t.accountSummaryCombined)||void 0===e?void 0:e.loans)||[]).concat((null===(u=null==t?void 0:t.accountSummaryCombined)||void 0===u?void 0:u.closedAccounts)||[]).find(t=>t.accountNumber==this.accountNumber);n&&(this.productType=n.type,this.loanAccountNumber=this.accountNumber);const c=[].concat((null===(r=null==t?void 0:t.accountSummaryCombined)||void 0===r?void 0:r.savings)||[]).concat((null===(l=null==t?void 0:t.accountSummaryCombined)||void 0===l?void 0:l.closedSavingsAccounts)||[]).find(t=>t.accountNumber==this.accountNumber);if(c&&(this.productType=c.type,this.savingsAccountNumber=this.accountNumber),!this.loanAccountNumber&&!this.savingsAccountNumber){const n=[].concat((null===(d=null==t?void 0:t.accountSummaryCombined)||void 0===d?void 0:d.savings)||[]).concat((null===(m=null==t?void 0:t.accountSummaryCombined)||void 0===m?void 0:m.closedSavingsAccounts)||[]).find(t=>t.loanAccountNumber==this.accountNumber);n&&(this.router.navigate([this.routingPath+"accounts"],{queryParams:{number:n.accountNumber}}),this.savingsAccountNumber=n.accountNumber)}}this.getAccounts()}})}getAccounts(){this.getAccountIndex(),this.getFAQSummary()}getFAQSummary(){var t,n,c,a,o;((null===(t=this.currentAccount)||void 0===t?void 0:t.isSavings)||(null===(n=this.currentAccount)||void 0===n?void 0:n.isLoan))&&((null===(c=this.currentAccount)||void 0===c?void 0:c.isSavings)?this.getFAQData(0,null===(o=this.currentAccount)||void 0===o?void 0:o.id):this.getFAQData(null===(a=this.currentAccount)||void 0===a?void 0:a.id,0))}getAccountIndex(){var t,n;(null===(t=this.accounts)||void 0===t?void 0:t.length)?this.loanAccountNumber||this.savingsAccountNumber?this.accounts.forEach((t,n)=>{[this.loanAccountNumber,this.savingsAccountNumber].includes(null==t?void 0:t.accountNumber)&&(this.accountIndex=n)}):this.accountIndex=(null===(n=this.accounts)||void 0===n?void 0:n.length)-1:this.accountIndex=0}onNextPage(){this.accountIndex<this.accounts.length-1?this.accountIndex+=1:this.accountIndex=0,this.navigateToNextAccount()}onPrevPage(){this.accountIndex>0?this.accountIndex-=1:this.accountIndex=this.accounts.length-1,this.navigateToNextAccount()}getFAQData(t,n){this.faqService.getFAQAccountWithSystem(t,n,this.currentAccount.type).subscribe(t=>{var n;const c=[];t&&0!==t.length?(null==t||t.map(t=>{if([g.a.NEXT_PAYMENT_DUE,g.a.FIRST_MONTHLY_PAYMENT_DUE,g.a.UNLOCK_SAVINGS_DATE].includes(t.answerParameter)){const n=this.datePipe.transform(t.dateForAnswer,"MM/dd/yyyy")||"";t.answer=`${t.answer}${n}.`}c.push({question:t.questionDescription,answer:t.answer})}),this.faqData={loanAccountStatus:null===(n=t[0])||void 0===n?void 0:n.questionCategory,faqContent:c}):this.faqData={loanAccountStatus:"",faqContent:[]}})}navigateToNextAccount(){var t,n;(null===(t=this.currentAccount)||void 0===t?void 0:t.accountNumber)?this.router.navigate([this.routingPath+"accounts"],{queryParams:{number:null===(n=this.currentAccount)||void 0===n?void 0:n.accountNumber}}):this.router.navigate([this.routingPath+"accounts"])}getNextPayment(t){var n,c;const a=Date.now();(null===(n=null==t?void 0:t.payments)||void 0===n?void 0:n.length)||(t.payments=[]);let o={};return null===(c=null==t?void 0:t.payments)||void 0===c||c.some(t=>(o=t,t.paymentDueDate>=a)),this.isPaymentSatisfied=!(!(null==o?void 0:o.paymentEffectiveDate)||(null==o?void 0:o.status)!==d.b.PAID),o}ngOnDestroy(){this.makePaymentCallback.unsubscribe(),this.querySubscribe.unsubscribe(),this.accountSubscribe&&this.accountSubscribe.unsubscribe(),this.cancelPendingPaymentCallback.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(f.Rb(i.a),f.Rb(i.f),f.Rb(A.a),f.Rb(S.a),f.Rb(A.g),f.Rb(y.a),f.Rb(a.f))},t.\u0275cmp=f.Lb({type:t,selectors:[["app-account"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"pageIndex","pages","nextPage","prevPage"],["class","container pt-15 pb-30",4,"ngIf"],[3,"savingsData","faqData",4,"ngIf"],[3,"loanData","faqData",4,"ngIf"],[3,"savingsData","faqData"],[3,"loanData","faqData"],[1,"container","pt-15","pb-30"],[1,"row"],[1,"col-md-4","col-md-offset-4"],[3,"openBusinessCredit"],[3,"accounts",4,"ngIf"],[3,"show","onCloseBusinessCredit"],[3,"accounts"]],template:function(t,n){1&t&&f.Oc(0,k,4,4,"ng-container",0),2&t&&f.rc("ngIf",n.accounts&&n.accounts.length)},directives:[a.o,N.a,D.a,C.a,P.a,I.a,O.a],encapsulation:2}),t})(),canActivate:[u.a,r.a]}];let U=(()=>{class t{}return t.\u0275mod=f.Pb({type:t}),t.\u0275inj=f.Ob({factory:function(n){return new(n||t)},imports:[[a.c,o.f,o.q,s.a,e.a,l.a,i.i.forChild(B)]]}),t})()}}]);